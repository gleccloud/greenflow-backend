openapi: 3.0.3
info:
  title: GLEC Green Logistics Bidding API
  description: |
    **GLEC 녹색물류 입찰·오더 API**

    ISO-14083 기반 탄소배출집약도(EI) 데이터를 활용한 물류 입찰 평가 API.

    ## 핵심 기능
    - **Fleet EI 조회**: 운송사별 실시간 탄소배출집약도 (gCO₂e/t·km)
    - **입찰 평가 엔진**: 가격, 리드타임, EI를 동시 고려한 종합 평가
    - **배차 최적화**: 다수 오더 동시 최적 배차
    - **실시간 EI 업데이트**: WebSocket/SSE를 통한 실시간 알림

    ## 인증
    모든 API 요청은 `X-API-Key` 헤더에 유효한 API 키를 포함해야 합니다.

    ## Rate Limiting
    - 기본: 분당 60 요청, 일일 10,000 요청
    - 프리미엄 티어: 분당 300 요청, 일일 100,000 요청

    ## 데이터 품질 등급 (ISO-14083)
    - **Grade 1**: Primary data (실측, DTG 기반)
    - **Grade 2**: Secondary data (모델링, 추정)
    - **Grade 3**: Default/Industry average
  version: 2.0.0
  contact:
    name: GLEC API Support
    email: api-support@glec.com
    url: https://glec.com/api-support
  license:
    name: Proprietary
    url: https://glec.com/api-license

servers:
  - url: https://api.glec.com/v2
    description: Production server
  - url: https://api-staging.glec.com/v2
    description: Staging server
  - url: http://localhost:3000/v2
    description: Development server

tags:
  - name: Fleet
    description: 운송사 차량 편대 및 EI 정보 조회
  - name: Bid Evaluation
    description: 입찰 평가 및 순위 계산
  - name: Dispatch
    description: 배차 최적화
  - name: Real-time
    description: 실시간 EI 업데이트 및 알림
  - name: Developer
    description: API 키 관리, 사용량 통계

security:
  - ApiKeyAuth: []

paths:
  # ========================================
  # Fleet Endpoints
  # ========================================
  /fleet/ei/{fleetId}:
    get:
      tags:
        - Fleet
      summary: Get Fleet EI (Carbon Intensity)
      description: |
        특정 운송사 차량 편대의 탄소배출집약도(EI) 조회.

        **EI (Emission Intensity)**: gCO₂e/t·km (그램 CO2 equivalent per tonne-kilometer)

        **Data Quality**:
        - Grade 1: 실측 데이터 (DTG 기반, 신뢰도 95%+)
        - Grade 2: 모델링 데이터 (추정, 신뢰도 80-95%)
      operationId: getFleetEI
      parameters:
        - name: fleetId
          in: path
          required: true
          description: Fleet identifier (e.g., FLT-A01)
          schema:
            type: string
            example: FLT-A01
        - name: route_origin
          in: query
          description: Origin city code for route-specific EI
          schema:
            type: string
            example: SEL
        - name: route_destination
          in: query
          description: Destination city code
          schema:
            type: string
            example: BSN
        - name: cargo_type
          in: query
          description: Cargo type
          schema:
            type: string
            enum: [General, Refrigerated, Frozen, Hazardous]
            default: General
        - name: payload_weight_kg
          in: query
          description: Payload weight in kilograms
          schema:
            type: integer
            minimum: 0
            example: 15000
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FleetEIResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
        '429':
          $ref: '#/components/responses/TooManyRequests'

  /fleet/ei/{fleetId}/history:
    get:
      tags:
        - Fleet
      summary: Get Fleet EI History (Time-Series)
      description: 특정 기간 동안의 EI 시계열 데이터 조회 (최대 90일)
      operationId: getFleetEIHistory
      parameters:
        - name: fleetId
          in: path
          required: true
          schema:
            type: string
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
            example: '2026-01-01'
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
            example: '2026-01-31'
        - name: aggregation
          in: query
          description: Data aggregation interval
          schema:
            type: string
            enum: [hourly, daily, weekly]
            default: daily
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FleetEIHistoryResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  /fleet/search:
    post:
      tags:
        - Fleet
      summary: Search Fleets by Criteria
      description: EI, 차량 타입, 지역 등으로 운송사 검색
      operationId: searchFleets
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FleetSearchRequest'
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FleetSearchResponse'

  # ========================================
  # Bid Evaluation Endpoints
  # ========================================
  /order/bid-evaluation:
    post:
      tags:
        - Bid Evaluation
      summary: Evaluate Bids (Core API)
      description: |
        **핵심 API**: 여러 운송사 입찰을 가격, 리드타임, EI로 종합 평가하여 순위 산정.

        **평가 공식**:
        ```
        Score = α × Price_norm + β × Leadtime_norm + γ × EI_norm
        ```

        **Normalization**: 낮을수록 좋음 → `1 - (value / max_value)`

        **가중치 조정**:
        - `weight_price`: 가격 가중치 (예: 0.5 = 50%)
        - `weight_leadtime`: 리드타임 가중치 (예: 0.2 = 20%)
        - `weight_ei`: EI 가중치 (예: 0.3 = 30%)

        **EI 필터링**:
        - `hard`: EI 임계값 초과 시 입찰 제외
        - `soft`: EI 임계값 초과 시 점수만 낮춤 (제외하지 않음)
      operationId: evaluateBids
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BidEvaluationRequest'
      responses:
        '200':
          description: Successful bid evaluation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BidEvaluationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'
        '422':
          description: Unprocessable Entity (validation errors)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                error:
                  code: VALIDATION_ERROR
                  message: "Weights must sum to 1.0"
                  details:
                    weight_price: 0.5
                    weight_leadtime: 0.2
                    weight_ei: 0.4
                    sum: 1.1

  # ========================================
  # Dispatch Optimization Endpoints
  # ========================================
  /dispatch/optimize:
    post:
      tags:
        - Dispatch
      summary: Optimize Batch Dispatch
      description: 다수 오더를 동시에 최적 배차 (AI 기반)
      operationId: optimizeDispatch
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DispatchOptimizationRequest'
      responses:
        '200':
          description: Successful optimization
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DispatchOptimizationResponse'
        '400':
          $ref: '#/components/responses/BadRequest'

  # ========================================
  # Real-time Endpoints
  # ========================================
  /realtime/ei-updates:
    get:
      tags:
        - Real-time
      summary: Subscribe to EI Updates (SSE)
      description: |
        Server-Sent Events (SSE) 스트림으로 실시간 EI 업데이트 수신.

        **연결 방법**:
        ```javascript
        const eventSource = new EventSource('https://api.glec.com/v2/realtime/ei-updates?fleet_ids=FLT-A01,FLT-B02', {
          headers: { 'X-API-Key': 'your-api-key' }
        });

        eventSource.addEventListener('ei_updated', (event) => {
          const data = JSON.parse(event.data);
          console.log('Fleet', data.fleet_id, 'EI updated:', data.new_ei);
        });
        ```
      operationId: subscribeEIUpdates
      parameters:
        - name: fleet_ids
          in: query
          required: true
          description: Comma-separated fleet IDs to watch
          schema:
            type: string
            example: FLT-A01,FLT-B02,FLT-C03
      responses:
        '200':
          description: SSE stream started
          content:
            text/event-stream:
              schema:
                type: string
                example: |
                  event: ei_updated
                  data: {"fleet_id":"FLT-A01","old_ei":87.5,"new_ei":85.2,"timestamp":"2026-02-04T14:30:00Z"}

  # ========================================
  # Developer Portal Endpoints
  # ========================================
  /developer/api-keys:
    get:
      tags:
        - Developer
      summary: List API Keys
      description: 사용자의 모든 API 키 조회
      operationId: listApiKeys
      responses:
        '200':
          description: Successful response
          content:
            application/json:
              schema:
                type: object
                properties:
                  api_keys:
                    type: array
                    items:
                      $ref: '#/components/schemas/ApiKey'

    post:
      tags:
        - Developer
      summary: Create API Key
      description: 새 API 키 생성
      operationId: createApiKey
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                key_name:
                  type: string
                  example: Production API Key
                scopes:
                  type: array
                  items:
                    type: string
                  example: ['read:fleet', 'read:ei', 'write:bid-evaluation']
                rate_limit_per_minute:
                  type: integer
                  default: 60
      responses:
        '201':
          description: API key created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiKeyCreateResponse'

  /developer/usage:
    get:
      tags:
        - Developer
      summary: Get API Usage Statistics
      description: API 사용량 통계 (시간대별, 엔드포인트별)
      operationId: getApiUsage
      parameters:
        - name: start_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: end_date
          in: query
          required: true
          schema:
            type: string
            format: date
        - name: granularity
          in: query
          schema:
            type: string
            enum: [hourly, daily]
            default: daily
      responses:
        '200':
          description: Usage statistics
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiUsageResponse'

# ============================================================================
# COMPONENTS
# ============================================================================
components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key
      description: |
        API key를 요청 헤더에 포함:
        ```
        X-API-Key: glec_live_aBcDeFgHiJkLmNoPqRsTuVwXyZ1234567890
        ```

  # ========================================
  # Schemas
  # ========================================
  schemas:
    # Fleet EI Response
    FleetEIResponse:
      type: object
      properties:
        fleet_id:
          type: string
          example: FLT-A01
        ei_value:
          type: number
          format: float
          description: Carbon intensity in gCO₂e/t·km
          example: 85.2
        ei_grade:
          $ref: '#/components/schemas/EIGrade'
        ei_confidence:
          type: number
          format: float
          minimum: 0
          maximum: 1
          description: Confidence level (0-1)
          example: 0.95
        trend:
          type: object
          properties:
            30day_avg:
              type: number
              example: 87.5
            improvement_rate:
              type: number
              description: Percentage change (negative = improvement)
              example: -2.6
            updated_at:
              type: string
              format: date-time
        breakdown:
          type: object
          properties:
            wtt:
              type: number
              description: Well-to-Tank emissions
              example: 18.3
            ttw:
              type: number
              description: Tank-to-Wheel emissions
              example: 66.9
        metadata:
          type: object
          properties:
            vehicle_count:
              type: integer
              example: 12
            avg_vehicle_age:
              type: number
              example: 4.2
            fuel_type:
              type: string
              example: Diesel
            certification:
              type: string
              example: ISO-14083

    # Fleet EI History Response
    FleetEIHistoryResponse:
      type: object
      properties:
        fleet_id:
          type: string
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        aggregation:
          type: string
          enum: [hourly, daily, weekly]
        data_points:
          type: array
          items:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
              ei_value:
                type: number
              ei_grade:
                $ref: '#/components/schemas/EIGrade'
              trip_count:
                type: integer
              total_distance_km:
                type: number
              total_cargo_tkm:
                type: number

    # Fleet Search Request
    FleetSearchRequest:
      type: object
      properties:
        filters:
          type: object
          properties:
            ei_max:
              type: number
              description: Maximum EI threshold
              example: 100.0
            ei_grade:
              type: array
              items:
                $ref: '#/components/schemas/EIGrade'
            fuel_types:
              type: array
              items:
                type: string
            vehicle_sizes:
              type: array
              items:
                type: string
            regions:
              type: array
              items:
                type: string
            iso_14083_certified:
              type: boolean
        sort_by:
          type: string
          enum: [ei_asc, ei_desc, price_asc, rating_desc]
          default: ei_asc
        limit:
          type: integer
          minimum: 1
          maximum: 100
          default: 20
        offset:
          type: integer
          minimum: 0
          default: 0

    # Fleet Search Response
    FleetSearchResponse:
      type: object
      properties:
        total_count:
          type: integer
        results:
          type: array
          items:
            type: object
            properties:
              fleet_id:
                type: string
              fleet_name:
                type: string
              owner_company:
                type: string
              ei_value:
                type: number
              ei_grade:
                $ref: '#/components/schemas/EIGrade'
              vehicle_count:
                type: integer
              vehicle_type:
                type: string
              fuel_type:
                type: string
              iso_14083_certified:
                type: boolean
              avg_rating:
                type: number

    # Bid Evaluation Request
    BidEvaluationRequest:
      type: object
      required:
        - order_id
        - shipper_id
        - shipment_detail
        - bid_candidates
        - evaluation_policy
      properties:
        order_id:
          type: string
          example: ORD-20260204-001
        shipper_id:
          type: string
          example: SHP-001
        shipper_name:
          type: string
          example: 삼성전자 로지스틱스
        shipment_detail:
          $ref: '#/components/schemas/ShipmentDetail'
        bid_candidates:
          type: array
          items:
            $ref: '#/components/schemas/BidCandidate'
        evaluation_policy:
          $ref: '#/components/schemas/EvaluationPolicy'
        regulatory_context:
          type: object
          properties:
            applies_cbam:
              type: boolean
              description: EU CBAM (Carbon Border Adjustment Mechanism) 적용 여부
            applies_korean_ndc:
              type: boolean
              description: 한국 NDC 이행 관련 여부
            esg_commitment:
              type: string
              example: Scope3_reduction_20pct

    # Shipment Detail
    ShipmentDetail:
      type: object
      properties:
        origin:
          $ref: '#/components/schemas/Location'
        destination:
          $ref: '#/components/schemas/Location'
        cargo:
          type: object
          properties:
            type:
              type: string
              example: General
            weight_kg:
              type: number
              example: 15000
            volume_m3:
              type: number
              example: 25
            special_handling:
              type: string
              example: None
        timeline:
          type: object
          properties:
            pickup_earliest:
              type: string
              format: date-time
            delivery_deadline:
              type: string
              format: date-time

    # Location
    Location:
      type: object
      properties:
        city:
          type: string
          example: Seoul
        lat:
          type: number
          example: 37.4979
        lon:
          type: number
          example: 126.7629

    # Bid Candidate
    BidCandidate:
      type: object
      required:
        - bid_id
        - carrier_id
        - fleet_id
        - price_won
        - leadtime_hours
        - ei_value
      properties:
        bid_id:
          type: string
          example: BID-001
        carrier_id:
          type: string
          example: CAR-001
        fleet_id:
          type: string
          example: FLT-A01
        carrier_name:
          type: string
          example: 현대운수
        price_won:
          type: number
          example: 550000
        leadtime_hours:
          type: number
          example: 4.0
        ei_value:
          type: number
          example: 85.2
        ei_grade:
          $ref: '#/components/schemas/EIGrade'

    # Evaluation Policy
    EvaluationPolicy:
      type: object
      required:
        - weight_price
        - weight_leadtime
        - weight_ei
      properties:
        weight_price:
          type: number
          minimum: 0
          maximum: 1
          example: 0.5
          description: 가격 가중치 (0-1)
        weight_leadtime:
          type: number
          minimum: 0
          maximum: 1
          example: 0.2
          description: 리드타임 가중치 (0-1)
        weight_ei:
          type: number
          minimum: 0
          maximum: 1
          example: 0.3
          description: EI 가중치 (0-1)
        ei_threshold:
          type: number
          example: 100.0
          description: EI 상한선 (gCO₂e/t·km)
        ei_filter_type:
          type: string
          enum: [hard, soft]
          default: soft
          description: |
            - hard: EI 임계값 초과 시 입찰 제외
            - soft: EI 임계값 초과 시 점수만 낮춤
        priority_shipper_fleets:
          type: array
          items:
            type: string
          description: 선호 운송사 리스트 (선택 사항)

    # Bid Evaluation Response
    BidEvaluationResponse:
      type: object
      properties:
        order_id:
          type: string
        evaluation_timestamp:
          type: string
          format: date-time
        evaluated_results:
          type: array
          items:
            $ref: '#/components/schemas/EvaluatedBid'
        summary:
          $ref: '#/components/schemas/EvaluationSummary'

    # Evaluated Bid
    EvaluatedBid:
      type: object
      properties:
        rank:
          type: integer
          example: 1
        bid_id:
          type: string
        carrier_id:
          type: string
        fleet_id:
          type: string
        carrier_name:
          type: string
        scores:
          type: object
          properties:
            price_score:
              type: number
              example: 0.85
            leadtime_score:
              type: number
              example: 0.92
            ei_score:
              type: number
              example: 0.95
            quality_grade_factor:
              type: number
              example: 1.0
        composite_score:
          type: number
          description: Weighted average score (0-1)
          example: 0.87
        rank_change_from_price_only:
          type: integer
          description: Rank change when EI is considered (negative = improved)
          example: -1
        recommendation:
          type: object
          properties:
            status:
              type: string
              enum: [RECOMMENDED, ACCEPTABLE_WITH_CAUTION, NOT_RECOMMENDED]
            reason:
              type: array
              items:
                type: string
        ei_analysis:
          type: object
          properties:
            ei_value:
              type: number
            ei_percentile:
              type: number
              description: Percentile ranking (higher = more efficient)
            fleet_trend:
              type: object
              properties:
                30day_avg_ei:
                  type: number
                improvement_rate:
                  type: number
            threshold_exceed:
              type: object
              properties:
                exceed_amount:
                  type: number
                exceed_percentage:
                  type: number

    # Evaluation Summary
    EvaluationSummary:
      type: object
      properties:
        recommended_carrier_id:
          type: string
        recommended_bid_id:
          type: string
        estimated_carbon_reduction:
          type: object
          properties:
            vs_rank2_carrier:
              type: number
              description: gCO₂e reduction vs 2nd ranked carrier
            vs_price_only_selection:
              type: number
              description: gCO₂e reduction vs price-only selection
            reduction_percentage:
              type: number
        compliance:
          type: object
          properties:
            all_candidates_meet_threshold:
              type: boolean
            ei_filtered_count:
              type: integer
            data_quality_concerns:
              type: array
              items:
                type: object
                properties:
                  carrier_id:
                    type: string
                  grade:
                    $ref: '#/components/schemas/EIGrade'
                  recommendation:
                    type: string

    # Dispatch Optimization Request
    DispatchOptimizationRequest:
      type: object
      properties:
        dispatch_batch:
          type: object
          properties:
            batch_id:
              type: string
            shipper_id:
              type: string
            orders:
              type: array
              items:
                type: object
                properties:
                  order_id:
                    type: string
                  origin:
                    type: string
                  destination:
                    type: string
                  weight_kg:
                    type: number
                  deadline:
                    type: string
                    format: date-time
                  bid_candidates:
                    type: array
                    items:
                      $ref: '#/components/schemas/BidCandidate'
            optimization_goals:
              type: object
              properties:
                minimize_cost:
                  type: number
                  example: 0.4
                minimize_ei:
                  type: number
                  example: 0.4
                minimize_time:
                  type: number
                  example: 0.2

    # Dispatch Optimization Response
    DispatchOptimizationResponse:
      type: object
      properties:
        batch_id:
          type: string
        optimization_timestamp:
          type: string
          format: date-time
        optimized_assignments:
          type: array
          items:
            type: object
            properties:
              order_id:
                type: string
              assigned_carrier_id:
                type: string
              assigned_fleet_id:
                type: string
              total_cost:
                type: number
              total_ei:
                type: number
              estimated_completion:
                type: string
                format: date-time
        batch_summary:
          type: object
          properties:
            total_cost:
              type: number
            total_emissions_kg:
              type: number
            total_distance_km:
              type: number
            optimization_improvement:
              type: object
              properties:
                cost_savings_won:
                  type: number
                ei_reduction_kg:
                  type: number
                time_savings_hours:
                  type: number

    # API Key
    ApiKey:
      type: object
      properties:
        api_key_id:
          type: string
          format: uuid
        key_name:
          type: string
        key_prefix:
          type: string
          example: glec_live_aBcDeFgH
        scopes:
          type: array
          items:
            type: string
        status:
          type: string
          enum: [ACTIVE, SUSPENDED, REVOKED, EXPIRED]
        rate_limit_per_minute:
          type: integer
        created_at:
          type: string
          format: date-time
        last_used_at:
          type: string
          format: date-time
        expires_at:
          type: string
          format: date-time

    # API Key Create Response
    ApiKeyCreateResponse:
      type: object
      properties:
        api_key:
          type: string
          description: Full API key (only shown once!)
          example: glec_live_aBcDeFgHiJkLmNoPqRsTuVwXyZ1234567890
        api_key_id:
          type: string
          format: uuid
        key_name:
          type: string
        key_prefix:
          type: string
        created_at:
          type: string
          format: date-time
        warning:
          type: string
          example: Store this API key securely. It will not be shown again.

    # API Usage Response
    ApiUsageResponse:
      type: object
      properties:
        start_date:
          type: string
          format: date
        end_date:
          type: string
          format: date
        granularity:
          type: string
        total_requests:
          type: integer
        successful_requests:
          type: integer
        failed_requests:
          type: integer
        avg_response_time_ms:
          type: number
        data_points:
          type: array
          items:
            type: object
            properties:
              timestamp:
                type: string
                format: date-time
              request_count:
                type: integer
              avg_response_time_ms:
                type: number
        by_endpoint:
          type: array
          items:
            type: object
            properties:
              endpoint:
                type: string
              method:
                type: string
              request_count:
                type: integer
              avg_response_time_ms:
                type: number

    # EI Grade Enum
    EIGrade:
      type: string
      enum:
        - GRADE_1
        - GRADE_2
        - GRADE_3
        - NOT_VERIFIED
      description: |
        - GRADE_1: Primary data (실측, DTG 기반)
        - GRADE_2: Secondary data (모델링, 추정)
        - GRADE_3: Default/Industry average
        - NOT_VERIFIED: 미검증 데이터

    # Error Response
    Error:
      type: object
      properties:
        error:
          type: object
          properties:
            code:
              type: string
              example: INVALID_REQUEST
            message:
              type: string
              example: Invalid request parameters
            details:
              type: object
              additionalProperties: true
            timestamp:
              type: string
              format: date-time
            request_id:
              type: string
              description: Unique request ID for support

  # ========================================
  # Responses
  # ========================================
  responses:
    BadRequest:
      description: Bad Request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: INVALID_REQUEST
              message: Invalid request parameters
              details:
                field: fleet_id
                issue: Must be a valid fleet identifier
              timestamp: '2026-02-04T14:30:00Z'
              request_id: req_aBcDeFgH123

    Unauthorized:
      description: Unauthorized (Invalid or missing API key)
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: UNAUTHORIZED
              message: Invalid API key
              timestamp: '2026-02-04T14:30:00Z'
              request_id: req_aBcDeFgH123

    NotFound:
      description: Resource Not Found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: NOT_FOUND
              message: Fleet not found
              details:
                fleet_id: FLT-INVALID
              timestamp: '2026-02-04T14:30:00Z'
              request_id: req_aBcDeFgH123

    TooManyRequests:
      description: Rate Limit Exceeded
      headers:
        X-RateLimit-Limit:
          schema:
            type: integer
          description: Request limit per window
        X-RateLimit-Remaining:
          schema:
            type: integer
          description: Remaining requests in current window
        X-RateLimit-Reset:
          schema:
            type: integer
          description: Unix timestamp when limit resets
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            error:
              code: RATE_LIMIT_EXCEEDED
              message: Rate limit exceeded. Limit: 60 requests per minute
              timestamp: '2026-02-04T14:30:00Z'
              request_id: req_aBcDeFgH123
